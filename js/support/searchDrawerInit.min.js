jQuery(document).ready(function(a){a(".issue-row").flickity({cellSelector:".carousel-cell",cellAlign:"left",pageDots:!1,contain:!0,setGallerySize:!1,dragThreshold:10})}),$(".drawer").drawer({class:{nav:"drawer-nav",toggle:"drawer-toggle",overlay:"drawer-overlay",open:"drawer-open",close:"drawer-close",dropdown:"dropdown-toggle"},iscroll:{mouseWheel:!0,preventDefault:!1},showOverlay:!0}),$("#filterToggle").click(function(a){$(".search-results").toggleClass("opened")});var URL=new Uri(location),catQuery=URL.getQueryParamValue("cat"),issueQuery=URL.getQueryParamValue("issue");if(catQuery){var activeCategoriesFromURL=catQuery.split(",");activeCategoriesFromURL.forEach(function(a){$(".search-container").find("[data-cat_id="+a+"]").toggleClass("active")})}if(issueQuery){var activeCategoriesFromURL=issueQuery.split(",");activeCategoriesFromURL.forEach(function(a){$(".search-container").find("[data-issue="+a+"]").toggleClass("active")})}$(".filter-item").click(function(a){a.stopPropagation();var b=$(this).parent().hasClass("lone-parent"),c=$(this).hasClass("parent-category"),d=$(this).parent().hasClass("active"),e=$(this).parents(".drawer-dropdown"),f=e.hasClass("active"),g=$(this).parent().siblings(),h=g.hasClass("active");if(c)return void console.log("parent is dropdown");b&&(console.log("no parent"),$(this).parent().toggleClass("active")),console.log(e),console.log("active state: "+d),f||h||d||(e.addClass("active"),$(this).parent().addClass("active")),f||h||d||(e.addClass("active"),$(this).parent().addClass("active")),f&&h&&d&&$(this).parent().removeClass("active"),f&&h&&!d&&$(this).parent().addClass("active"),f&&!h&&d&&(e.removeClass("active"),$(this).parent().removeClass("active")),f&&!h&&d&&(e.removeClass("active"),$(this).parent().removeClass("active")),!f||h||d||$(this).parent().addClass("active"),f&&!h&&d&&(e.removeClass("active"),$(this).parent().removeClass("active")),$(".search-container").find("[data-cat_id="+$(this).data("cat_id")+"]").not($(this)).toggleClass("active"),$(".search-container").find("[data-issue="+$(this).data("issue")+"]").not($(this)).toggleClass("active")}),$(".columns-search-input-submit").click(function(a){var b=[],c=[];$(".drawer-menu .category-filter").filter(".active").each(function(){b.push($(this).data("cat_id"))}),$(".drawer-menu .issue-filter").filter(".active").each(function(){c.push($(this).data("issue"))});var d=$(".columns-search-input-field").val(),e=URL.clone().setPath("/search").deleteQueryParam("cat").deleteQueryParam("issue");b.length>0&&e.replaceQueryParam("cat",b.join(",")),c.length>0&&e.replaceQueryParam("issue",c.join(",")),d&&e.replaceQueryParam("search",d),location.replace(e.toString())}),$(".search-filter-item.active").click(function(a){$(".columns-search-input-field").val(""),URL.replaceQueryParam("search","")}),$(".columns-search-input-field").on("keyup",_.debounce(function(a){switch(console.log("updating search"),a.currentTarget.value){case"":$(".search-filter-item").html(a.currentTarget.value).removeClass("active");break;default:$(".columns-search-input-field").not($(this).each(function(){$(".columns-search-input-field").val(a.currentTarget.value),$(".search-filter-item").html(a.currentTarget.value).addClass("active")}))}},500));