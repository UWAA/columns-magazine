function checkParent(a){var b=a.parent().hasClass("lone-parent"),c=a.hasClass("parent-category"),d=a.parent().hasClass("active"),e=a.parents(".drawer-dropdown"),f=e.hasClass("active"),g=a.parent().siblings(),h=g.hasClass("active");c||(b&&console.log("no parent"),f||h||e.addClass("active"),f||h||e.addClass("active"),f&&!h&&e.removeClass("active"),f&&!h&&e.removeClass("active"),f&&!h&&e.removeClass("active"),console.log(e),console.log("active state: "+d))}jQuery(document).ready(function(a){a(".issue-row").flickity({cellSelector:".carousel-cell",cellAlign:"left",pageDots:!1,contain:!0,setGallerySize:!1,dragThreshold:10})}),$(".drawer").drawer({class:{nav:"drawer-nav",toggle:"drawer-toggle",overlay:"drawer-overlay",open:"drawer-open",close:"drawer-close",dropdown:"dropdown-toggle"},iscroll:{mouseWheel:!0,preventDefault:!1},showOverlay:!0}),$("#filterToggle").click(function(a){$(".search-results").toggleClass("opened")});var URL=new Uri(location),catQuery=URL.getQueryParamValue("cat"),issueQuery=URL.getQueryParamValue("issue");if(catQuery){var activeCategoriesFromURL=catQuery.split(",");activeCategoriesFromURL.forEach(function(a){$(".search-container").find("[data-cat_id="+a+"]").toggleClass("active")})}if(issueQuery){var activeCategoriesFromURL=issueQuery.split(",");activeCategoriesFromURL.forEach(function(a){$(".search-container").find("[data-issue="+a+"]").toggleClass("active")})}$(".current-filter-wrapper>.filter-item").click(function(a){console.log($(this).data("cat_id"));var b=$(".drawer-menu").find("[data-cat_id="+$(this).data("cat_id")+"]");b.parent().removeClass("active"),$(this).removeClass("active"),checkParent(b)}),$(".drawer-menu .filter-item").click(function(a){a.stopPropagation(),$(this).parent().toggleClass("active"),checkParent($(this)),$(".search-container").find("[data-cat_id="+$(this).data("cat_id")+"]").not($(this)).toggleClass("active"),$(".search-container").find("[data-issue="+$(this).data("issue")+"]").not($(this)).toggleClass("active")}),$(".columns-search-input-submit").click(function(a){var b=[],c=[];$(".drawer-menu .cat-item").filter(".active").each(function(){b.push($(this).children(".filter-item").data("cat_id"))}),$(".drawer-menu .issue-filter").parent().filter(".active").not(".parent-category").each(function(){c.push($(this).children(".category-filter").data("issue"))});var d=$(".columns-search-input-field").val(),e=URL.clone().setPath("/search").deleteQueryParam("cat").deleteQueryParam("issue");b.length>0&&e.replaceQueryParam("cat",b.join(",")),c.length>0&&e.replaceQueryParam("issue",c.join(",")),d&&e.replaceQueryParam("search",d),location.replace(e.toString())}),$(".search-filter-item.active").click(function(a){$(".columns-search-input-field").val(""),URL.replaceQueryParam("search","")}),$(".columns-search-input-field").on("keyup",_.debounce(function(a){switch(console.log("updating search"),a.currentTarget.value){case"":$(".search-filter-item").html(a.currentTarget.value).removeClass("active");break;default:$(".columns-search-input-field").not($(this).each(function(){$(".columns-search-input-field").val(a.currentTarget.value),$(".search-filter-item").html(a.currentTarget.value).addClass("active")}))}},500));